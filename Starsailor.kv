#:kivy 2.3.0
#:import utils kivy.utils
# parent widget
<Starsailor>:
    orientation: 'vertical'
    # separate the help menu/inventory from the screenmanger
    BoxLayout:
        orientation: "horizontal"
        size_hint_y: .2
        Button:
            id: HelpButton
            fit_mode: "fill"
            size_hint_x: .25
            text: "Inventory"
            on_press: root.toggle_inventory()
        Image:
            source: 'pictures/GUI/Starsailor_Banner.png'
            fit_mode: "fill"
        Image:
            source: 'pictures/GUI/Starsailor_MENU.png'
            fit_mode: 'fill'
            size_hint_x: .25
    RelativeLayout:
        # Below is the screemanager
        ScreenManager:
            id: ScreenManager
            Experience:
            Map:
            MainMenu:
            IntroScreen:
            Showroom:
            TwilightIslesLanding:
            ValdstafarLanding:
            DisplayCase:
            ChtakLanding:
            HeavensForgeLanding:
            LightWelder:
            Factory:
            

            
        BoxLayout:
            canvas.before:
                Color:
                    rgba: 0.2, 0.2, 0.2, .8  # Outline color (red in this case)
                Rectangle:
                    size: self.size
                    pos: self.pos
                Line:
                    width: 2  # Outline thickness
                    rectangle: self.x, self.y, self.width, self.height 
            orientation: "vertical"
            id: Inventory
            size_hint: .25, 1
            opacity: 0
            Label:
                text: "Money"
                size_hint_y: .15
            Label:
                text: str(root.money)
                size_hint_y: .15
            Label:
                text: "Inventory"
            GridLayout:
                id: Inventory_Grid
                rows: 6
                cols: 1
            

<MainMenu>
    name: 'MainMenu'
    RelativeLayout:            
        Image:
            source: 'pictures/startscreen/startscreen.png'
            fit_mode: 'fill'
        Button:
            text: "Start"
            pos_hint: {'center_x': .5, 'y': .2}
            size_hint: .3, .1
            background_color: (.1, .1, .1, .8)
            border: (20, 20, 20, 20)
            on_press: app.root.ids.ScreenManager.current = "IntroScreen"


<IntroScreen>
    name: "IntroScreen"
    RelativeLayout:
        Image:
            source: "pictures/map/map.png"
            fit_mode: "fill"
        Label: 
            size_hint: .8, .8
            pos_hint: {'center_x': .5, 'top': 1}
            canvas.before:
                Color:
                    rgba: (1, 1, 1, 1)
                Rectangle:
                    size: self.size
                    pos: self.pos
            color: (0, 0, 0, 1) 
            valign: "top"
            text: "Here is a whole bunch of text that that will be in this part"
        Button:
            text: "Continue"
            size_hint: .3, .2
            pos_hint: {'center_x': .5, 'top': .2}
            on_press: app.root.ids.ScreenManager.current = "Map"


<Map>
    name: "Map"
    RelativeLayout:
        size: root.size
        pos: root.pos
        ScrollView:
            id: Scrollview
            Image:
                id: MapImage
                source: 'pictures/map/map.png'
                size_hint: None, None
                size: 1792, 1024
                fit_mode: 'fill'
                RelativeLayout:
                    size: MapImage.size
                    pos: MapImage.pos
                    Image: 
                        size_hint: .1, .1
                        id: HeavensForgePlanet
                        source:  'pictures/map/heavens_forge.png'
                        on_touch_down: if self.collide_point(*args[1].pos): app.root.ids.ScreenManager.current = "HeavensForgeLanding"
                        
                    Image:
                        size_hint: .1, .1
                        id: ChtakPlanet
                        source: "pictures/map/chtak.png"
                        pos_hint: {'x': .4, 'y': 0}
                        on_touch_down: if self.collide_point(*args[1].pos): app.root.ids.ScreenManager.current = "ChtakLanding"

                    Image:
                        size_hint: .1, .1
                        id: ValdstafarPlanet
                        source: "pictures/map/valdstafar.png"
                        pos_hint: {'x': .4, 'y': .2}
                        on_touch_down: if self.collide_point(*args[1].pos): app.root.ids.ScreenManager.current = "ValdstafarLanding"
                    Image:
                        size_hint: .1, .1
                        id: TwliglightIslesPlanet
                        source: "pictures/map/twilight_isles.png"
                        pos_hint: {'x': .7, 'y': .8}
                        on_touch_down: if self.collide_point(*args[1].pos): app.root.ids.ScreenManager.current = "TwilightIslesLanding"

                    Boat:
                        id: Boat
                        size_hint: .1, .1
        Button:
            id: UpButton
            text:'^'
            pos: root.width - self.width * 2, self.height
            size_hint: .1, .1
            on_press: root.start_moving_boat('up')
            on_release: root.stop_moving_boat()

        Button:
            id: DownButton
            text:'\/'
            pos: root.width - self.width * 2, 0
            size_hint: .1, .1
            on_press: root.start_moving_boat('down')
            on_release: root.stop_moving_boat()

        Button:
            id: LeftButton
            text:'<'
            pos: root.width - self.width * 3, 0
            size_hint: .1, .1
            on_press: root.start_moving_boat('left')
            on_release: root.stop_moving_boat()

        Button:
            id: RightButton
            text:'>'
            pos: root.width - self.width, 0
            size_hint: .1, .1
            on_press: root.start_moving_boat('right')
            on_release: root.stop_moving_boat()

                


                

<HeavensForgeLanding>
    name: "HeavensForgeLanding"
    id: HeavensForgeLanding
    Image:
        source: "pictures/heavens_forge/heavens forge.png"
        fit_mode: "fill"
        RelativeLayout:
            size: HeavensForgeLanding.size
            Button:
                text: "Go Back"
                size_hint: .2, .1
                pos_hint: {'center_x': .5, 'top': 1}
                on_press: app.root.ids.ScreenManager.current = "Map"
            Button:
                text: "Enter"
                size_hint: .2, .1
                pos_hint: {"center_x": .5 , 'y': 0}
                on_press: app.root.ids.ScreenManager.current = "Factory"

<Factory>
    name: 'Factory'
    Image:
        id: FactoryImage

        source: 'pictures/heavens_forge/the factory/heavensforge.png'
        fit_mode: "fill"
        RelativeLayout:
            size: FactoryImage.size
            pos: FactoryImage.pos

            Button:
                text: "Talk to the Lightwelder"
                pos_hint: {'center_x': .7, 'center_y': .5}
                size_hint: .15, .15    
                text_size: self.size
                halign: 'center'
                valign: 'middle'
                background_color: .7, .2, .2, .5
                on_press: app.root.ids.ScreenManager.current = "LightWelder"
            Button:
                text: "Go Back"
                size_hint: .2, .1
                pos_hint: {'x': 0, 'y': 0}
                on_press: app.root.ids.ScreenManager.current = 'HeavensForgeLanding'


<LightWelder>
    name: "LightWelder"
    Image:
        id: LightWelder
        source: "pictures/heavens_forge/the factory/inside.png"  
        fit_mode: "fill"
        RelativeLayout:
            size: LightWelder.size
            pos: LightWelder.pos
            Image:
                source: 'pictures/heavens_forge/the factory/lightwelder.png'
                size_hint_y: .5
                pos_hint: {"center_x": .5, "y": 0}
            Label:
                canvas.before:
                    Color:
                        rgba: .2, .2, .2, .8
                    Rectangle:
                        size: self.size
                        pos: self.pos
                id: LightWelderDialog
                text: root.dialog
                text_size: self.size
                halign: 'center'
                valign: 'top'
                size_hint: 1, .25
                pos_hint: {'y': .75}
            Button:
                text: "Go Back"
                size_hint: .2, .1
                pos_hint: {'x': 0, 'y': 0}
                on_press: app.root.ids.ScreenManager.current = "Factory"
            Button:
                text:"Trade Starpaint for Hardlight"
                text_size: self.size
                size_hint: .2, .1
                pos_hint: {'right': 1, 'y': 0}
                on_press: root.trade_starpaint()
            







# -----------------------------------------Chtak----------------------------------------------------

<ChtakLanding>
# The name for the screenmanager to read
    name: "ChtakLanding"
    # add this to children of the screemanager

    # change id
    id: ChtakLanding
    Image:
        # change image source here
        source: "pictures/chtak/chtak.png"
        fit_mode: "fill"
        RelativeLayout:
            # change reference here
            size: ChtakLanding.size
            Button:
                text: "Go Back"
                size_hint: .2, .1
                pos_hint: {'center_x': .5, 'top': 1}
                on_touch_down: if self.collide_point(*args[1].pos): app.root.ids.ScreenManager.current = "Map"
            Button:
                text: "Enter"
                size_hint: .2, .1
                pos_hint: {"center_x": .5 , 'y': 0}
                # on_touch_down: if self.collide_point(*args[1].pos): app.root.ids.ScreenManager.current = "experience"


# -----------------------------------------Chtak----------------------------------------------------




# ------------------------------------------Valdstafar----------------------------------------------------

<ValdstafarLanding>
# The name for the screenmanager to read
    name: "ValdstafarLanding"
    # add this to children of the screemanager

    # change id
    id: ValdstafarLanding
    Image:
        # change image source here
        source: "pictures/valdstafar/valdstafar.png"
        fit_mode: "fill"
        RelativeLayout:
            # change reference here
            size: ValdstafarLanding.size
            Button:
                text: "Go Back"
                size_hint: .2, .1
                pos_hint: {'center_x': .5, 'top': 1}
                on_press: app.root.ids.ScreenManager.current = "Map"
            Button:
                text: "Enter"
                size_hint: .2, .1
                pos_hint: {"center_x": .5 , 'y': 0}
                on_press: app.root.ids.ScreenManager.current = "Showroom"





<ShowRoom>
# The name for the screenmanager to read
    name: "Showroom"
    # add this to children of the screemanager

    # change id
    id: Showroom
    Image:
        # change image source here
        source: "pictures/valdstafar/showroom/showroom.png"
        fit_mode: "fill"
        RelativeLayout:
            # change reference here
            size: Showroom.size
            Button:
                text: "Go Back"
                size_hint: .2, .1
                pos_hint: {'center_x': .5, 'top': 1}
                on_press: app.root.ids.ScreenManager.current = "ValdstafarLanding"
            Button:
                text: "View DisplayCase"
                size_hint: .2, .1
                pos_hint: {'center_x': .5, 'y': 0}
                on_press: app.root.ids.ScreenManager.current = "DisplayCase"
                

<DisplayCase>
# The name for the screenmanager to read
    name: "DisplayCase"
    # add this to children of the screemanager

    # change id
    id: DisplayCase
    Image:
        # change image source here
        source: "pictures/valdstafar/showroom/display_ case.png"
        fit_mode: "fill"
        RelativeLayout:
            # change reference here
            size: DisplayCase.size
            Button:
                text: "Go Back"
                size_hint: .2, .1
                pos_hint: {'center_x': .5, 'top': 1}
                on_press: app.root.ids.ScreenManager.current = "Showroom"
            Image:
                id: StarPaint
                source: 'pictures/valdstafar/showroom/starpaint.png'
                size_hint_y: .2
                pos_hint: {'center_x': .5, 'y': .22}
                on_touch_down: if self.collide_point(*args[1].pos): root.add_starpaint_to_inventory()


# ------------------------------------------Valdstafar----------------------------------------------------


<TwilightIslesLanding>
# The name for the screenmanager to read
    name: "TwilightIslesLanding"
    # add this to children of the screemanager

    # change id
    id: TwilightIslesLanding
    Image:
        # change image source here
        source: "pictures/twilight_isles/twilight_isles.png"
        fit_mode: "fill"
        RelativeLayout:
            # change reference here
            size: TwilightIslesLanding.size
            Button:
                text: "Go Back"
                size_hint: .2, .1
                pos_hint: {'center_x': .5, 'top': 1}
                on_touch_down: if self.collide_point(*args[1].pos): app.root.ids.ScreenManager.current = "Map"
            Button:
                text: "Enter"
                size_hint: .2, .1
                pos_hint: {"center_x": .5 , 'y': 0}
                # on_touch_down: if self.collide_point(*args[1].pos): app.root.ids.ScreenManager.current = "experience"


<Boat>
    source: 'pictures/Boats/boat.png'


<Experience>
    name: 'Experience'
    Image:
        id: EPImage
        source: 'pictures/chtak/experience.png'
        fit_mode: 'fill'
        RelativeLayout:
            size: EPImage.size
            pos: EPImage.pos
            Image:
                source: 'pictures/chtak/talasandra.png'
                size_hint_y: .6
                pos_hint:{'center_x': .5, 'y': 0}
            Compass:
                size_hint: .18, .3
                pos_hint: {'right': .9, 'top': .9}
                


<Compass>
    orientation: 'vertical'
    spacing: 20
    padding: 20
    canvas.before:
        Color:
            rgba: .4, .2, 0, 1
        Rectangle:
            size: self.size
            pos: self.pos
    Label:
        id: ShipPosX
        canvas.before:
            Color:
                rgba: .1, .1, .1, .8 
            Rectangle:
                size: self.size
                pos: self.pos
        text: 'x: '
        text_size: self.size
        halign: 'center'
        valign: 'middle'
    Label:
        id: ShipPosY
        canvas.before:
            Color:
                rgba: .1, .1, .1, .8 
            Rectangle:
                size: self.size
                pos: self.pos 
        text_size: self.size
        # text: 'y: ' + str(root.ids.map.ids.Boat.y)
        halign: 'center'
        valign: 'middle'